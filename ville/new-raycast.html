<!DOCTYPE html>
<html>
  <head>
    <title>Growing Circles</title>
    <style>
      body,
      html,
      canvas {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <script>
      let canvas = document.getElementById("canvas");
      let context = canvas.getContext("2d");

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      let focalLength = 500;
      let scale = focalLength;
      let speed = 5;
      let numLines = 100;
      let lines = [];

      for (let i = 0; i < numLines; i++) {
        let distance = Math.random() * focalLength;
        let angle = Math.random() * Math.PI * 2;
        let x = Math.cos(angle) * distance;
        let y = Math.sin(angle) * distance;
        lines.push({ x: x, y: y, distance: distance, angle: angle });
      }

      function render() {
        context.clearRect(0, 0, canvas.width, canvas.height);
        context.save();
        context.translate(canvas.width / 2, canvas.height / 2);

        lines.sort((a, b) => a.distance - b.distance);

        for (let line of lines) {
          context.beginPath();
          context.moveTo(line.x, line.y);
          let scale = focalLength / line.distance;
          line.x += Math.cos(line.angle) * speed;
          line.y += Math.sin(line.angle) * speed;
          line.distance += speed;
          if (line.distance > focalLength) {
            line.distance = 0;
            line.x = 0;
            line.y = 0;
          }
          context.lineTo(line.x * scale, line.y * scale);
          context.lineWidth = scale;
          context.strokeStyle =
            "rgba(255, 255, 255, " + (1 - line.distance / focalLength) + ")";
          context.stroke();
        }

        context.restore();
        requestAnimationFrame(render);
      }

      render();
    </script>
  </body>
</html>
