<!DOCTYPE html>
<html>
  <body>
    <canvas id="flameCanvas"></canvas>
    <script>
      const canvas = document.getElementById("flameCanvas");
      const ctx = canvas.getContext("2d");

      const flameColors = ["#FF4500", "#FFA500", "#FFD700", "#FFFACD"];
      const skewIntensity = 0.1;

      let flameHeight, flameWidth, flameData;
      let time = 0;

      // Resize the canvas to fit the window
      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        flameHeight = Math.floor(canvas.height / 4);
        flameWidth = Math.floor(canvas.width / 4);
        generateFlameData();
      }

      // Generate the flame pattern data
      function generateFlameData() {
        flameData = [];
        for (let y = 0; y < flameHeight; y++) {
          flameData[y] = [];
          for (let x = 0; x < flameWidth; x++) {
            flameData[y][x] = Math.floor(Math.random() * flameColors.length);
          }
        }
      }

      // Shift the flame pattern upwards
      function shiftFlameData() {
        for (let y = flameHeight - 1; y > 0; y--) {
          flameData[y] = flameData[y - 1];
        }
        flameData[0] = [];
        for (let x = 0; x < flameWidth; x++) {
          flameData[0][x] = Math.floor(Math.random() * flameColors.length);
        }
      }

      // Draw the flame on the canvas with skewing effect
      function drawFlame() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (let y = 0; y < flameHeight; y++) {
          for (let x = 0; x < flameWidth; x++) {
            const colorIndex = flameData[y][x];
            ctx.fillStyle = flameColors[colorIndex];

            // Apply skewing effect based on the time and the current row
            const skewAmount =
              (flameHeight - y) * skewIntensity * Math.sin(time * 0.02);
            ctx.setTransform(1, 0, skewAmount, 1, 0, 0);

            ctx.fillRect(x * 4, y * 4, 4, 4);

            // Reset the transformation for the next iteration
            ctx.setTransform(1, 0, 0, 1, 0, 0);
          }
        }
      }

      // Animation loop
      function animate() {
        time += 1;
        shiftFlameData();
        drawFlame();
        requestAnimationFrame(animate);
      }

      // Resize canvas on window resize
      window.addEventListener("resize", resizeCanvas);

      // Start the animation
      resizeCanvas();
      animate();
    </script>
  </body>
</html>
