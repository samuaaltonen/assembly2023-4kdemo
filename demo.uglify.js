let zzfxM=(a,l,i,t=125)=>{let r,h,n,o,s,c,f,z,x,d,u,M,g,p,w=0,S=[],m=[],y=[],P=0,v=0,R=1,C={},T=zzfxR/t*60>>2;for(;R;P++)S=[R=z=M=0],i.map((t,e)=>{for(f=l[t][P]||[0,0,0],R|=!!l[t][P],p=M+(l[t][0].length-2-!z)*T,g=e==i.length-1,h=2,o=M;h<f.length+g;z=++h){for(s=f[h],x=h==f.length+g-1&&g||d!=(f[0]||0)|s|0,n=0;n<T&&z;n++>T-99&&x&&(u+=(u<1)/99))c=(1-u)*S[w++]/2||0,m[o]=(m[o]||0)-c*v+c,y[o]=(y[o++]||0)+c*v+c;s&&(u=s%1,v=f[1]||0,s|=0)&&(S=C[[d=f[w=0]||0,s]]=C[[d,s]]||((r=[...a[d]])[2]*=2**((s-12)/12),0<s?zzfxG(...r):[]))}M=p});return[m,y]};const zzfx=(...t)=>zzfxP(zzfxG(...t)),zzfxV=.3,zzfxR=44100,zzfxX=new(window.AudioContext||webkitAudioContext),zzfxP=(...t)=>{let a=zzfxX.createBuffer(t.length,t[0].length,zzfxR),e=zzfxX.createBufferSource();return t.map((t,e)=>a.getChannelData(e).set(t)),e.buffer=a,e.connect(zzfxX.destination),e.start(),e},zzfxG=(t=1,e=.05,a=220,l=0,i=0,r=.1,h=0,n=1,o=0,s=0,c=0,f=0,z=0,x=0,d=0,u=0,M=0,g=1,p=0,w=0)=>{let S=2*Math.PI,m=o*=500*S/zzfxR/zzfxR,y=a*=(1+2*e*Math.random()-e)*S/zzfxR,P=[],v=0,R=0,C=0,T=1,b=0,I=0,F=0,A,L;for(l=l*zzfxR+9,p*=zzfxR,i*=zzfxR,r*=zzfxR,M*=zzfxR,s*=500*S/zzfxR**3,d*=S/zzfxR,c*=S/zzfxR,f*=zzfxR,z=z*zzfxR|0,L=l+p+i+r+M|0;C<L;P[C++]=F)++I%(100*u|0)||(F=h?1<h?2<h?3<h?Math.sin((v%S)**3):Math.max(Math.min(Math.tan(v),1),-1):1-(2*v/S%2+2)%2:1-4*Math.abs(Math.round(v/S)-v/S):Math.sin(v),F=(z?1-w+w*Math.sin(S*C/z):1)*(0<F?1:-1)*Math.abs(F)**n*t*zzfxV*(C<l?C/l:C<l+p?1-(C-l)/p*(1-g):C<l+p+i?g:C<L-M?(L-C-M)/r*g:0),F=M?F/2+(M>C?0:(C<L-M?1:(L-C)/M)*P[C-M|0]/2):F),A=(a+=o+=s)*Math.cos(d*R++),v+=A-A*x*(1-1e9*(Math.sin(C)+1)%2),T&&++T>f&&(a+=c,y+=c,T=0),!z||++b%z||(a=y,o=m,T=T||1);return P};class Vector{constructor(t,e){this.x=t,this.y=e}}const songData=[[[.4,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1],[3,0,43,,,.17,,3,-1.3,,160,.2,,2.2,200],[3.3,0,58,,,.06,,5.9,,,,,,1,,.2],[3.3,0,58,,,.15,,5.9,,,,,,1,,.2]],[[[,,1,32,34,32,1,18,,24,22,1,24,27,,20,25,,],[1,,,,,,,,32,,,,,,32,,,,]],[[,,1,32,34,32,1,18,,24,22,1,24,27,,,,,],[1,,,,,,,,32,,,,,,32,,,,]],[[,,1,32,34,32,1,18,,24,22,1,24,,,,,,],[1,,,,,,,,32,,,,,32,32,32,32,,]],[[,,1,32,34,32,1,18,,24,22,1,24,27,,20,25,,],[1,,,,,,,,32,,,,,,32,,,,],[2,,18,,,18,,,,,,,18,,,,18,,]],[[,,1,32,34,32,1,18,,24,22,1,24,27,,,,,],[1,,,,,,,,32,,,,,,32,32,,,],[2,,18,,,18,,,,,,,18,,,,18,,]],[[,,1,32,34,32,1,18,,24,22,1,24,27,,,,,],[1,,,,,,,,32,,,,,,32,,,,],[2,,18,,,18,,,,,,,18,,,,,,]],[[,,1,32,34,32,1,18,,24,22,1,24,27,,20,25,,],[1,,,,,,,,32,,,,,,32,,,,],[2,,18,,,18,,,,,,,18,,,,18,,],[3,,23,26,,14,,,11,,23,26,,14,,11,27,,],[,,8,,,,,,,,,,,,,,,,]],[[,,1,32,34,32,1,18,,24,22,1,24,27,,20,25,,],[1,,,,,,,,32,,,,,,32,,,,],[2,,18,,,18,,,,,,,18,,,,18,,],[4,,23,26,,14,,,11,,23,26,,14,,11,27,,],[,,8,,,,,,,,,,,,,,,,]]],[0,1,0,2,3,4,3,5,6,6,6,7,6,6,6,7],,{title:"paskaa",instruments:["Hihat","Claps","Bass Drum 2","synth","Instrument 4"],patterns:["Pattern 0","Pattern 1","Pattern 2","Pattern 3","Pattern 4","Pattern 5","Pattern 6","Pattern 7"]}],buffer=zzfxM(...songData);let myAudio=zzfxP(...buffer);const cellSize=20,w=Math.floor(window.innerWidth/cellSize)*cellSize,h=Math.floor(window.innerHeight/cellSize)*cellSize,zoom=.15,curve=.8,grid=new Vector(Math.floor(w/cellSize),Math.floor(h/cellSize)),rotateCos=Math.cos(Math.PI/9e3),rotateSin=Math.sin(Math.PI/9e3);let field=[],rotate=0;class Particle{constructor(){this.reset()}reset(){for(let t=0;t<10&&(this.pos=new Vector(Math.floor(Math.random()*w),Math.floor(Math.random()*h)),!field[Math.floor(this.pos.y/cellSize)*grid.x+Math.floor(this.pos.x/cellSize)]);t++);this.velocityMultiplier=Math.floor(1+4*Math.random()),this.curve=Math.random()*Math.PI/10,this.trail=[{...this.pos}],this.trailLen=Math.floor(10+20*Math.random()),this.angle=rotate,this.lightness=12}draw(e){var t=currentText===texts.length?0:this.angle/(2*Math.PI)*360;e.strokeStyle=`hsl(${t}, 100%, ${this.lightness}%)`;for(let t=1;t<this.trail.length;t++){var a=this.trail[t-1],l=this.trail[t];e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(l.x,l.y),e.stroke()}}update(){if(this.trail.length===this.trailLen)this.trail.shift(),this.trailLen--,0===this.trailLen&&this.reset();else{var t=field[Math.floor(this.pos.y/cellSize)*grid.x+Math.floor(this.pos.x/cellSize)];for(this.lightness=t?60:12,this.angle>t?this.angle-=this.curve:this.angle<t?this.angle+=this.curve:this.angle=t,this.pos.x+=Math.cos(this.angle+rotate)*this.velocityMultiplier,this.pos.y+=Math.sin(this.angle+rotate)*this.velocityMultiplier,this.trail.push({...this.pos});this.trail.length>this.trailLen;)this.trail.shift()}}}let ctx,particles=[];const canvas=document.createElement("canvas"),gradient=(ctx=canvas.getContext("2d",{willReadFrequently:!0}),canvas.width=w,canvas.height=h,document.body.appendChild(canvas),ctx.strokeStyle="white",ctx.lineWidth=2,ctx.createRadialGradient(w/2,h/2,h/cellSize,w/2,h/2,w)),texts=(gradient.addColorStop(0,"red"),gradient.addColorStop(.25,"orange"),gradient.addColorStop(.5,"yellow"),gradient.addColorStop(.75,"green"),gradient.addColorStop(1,"blue"),ctx.fillStyle=gradient,ctx.font=`bold ${h}px Arial`,ctx.textBaseline="middle",ctx.textAlign="center",["2","0","2","3","2023","ASSEMBLY","❤️"]);let currentText=0;function updateText(){currentText!==texts.length&&(ctx.fillText(texts[currentText],w/2,h/2+h/10,w),currentText++)}function updateFlowField(){var a=[],l=ctx.getImageData(0,0,w,h).data;for(let e=0;e<h;e+=cellSize)for(let t=0;t<w;t+=cellSize){var i=4*(e*w+t),i=(l[i]+l[1+i]+l[2+i])/3;a.push(i/255*Math.PI*2)}field=a}updateText(),updateFlowField(),setInterval(()=>{updateText(),updateFlowField()},6e3);for(let t=0;t<1e3;t++)particles.push(new Particle);const play=()=>{ctx.fillStyle="#000",ctx.fillRect(0,0,w,h),particles.forEach(t=>{t.update(field),t.draw(ctx)}),rotate+=Math.PI/360,requestAnimationFrame(play)};play();